<div class="story">
<h1>Story: NHSERS-111 Patient Login - Authentication</h1>
<div class="path">patient_app/NHSERS-111/NHSERS-111_S039_C2B_Patient_should_be_able_to_login_after_1_failed_attempt.story</div>
<div class="meta">
<div class="keyword">Meta:</div>
<div class="property">@acceptanceCriteria C2B</div>
<div class="property">@author Tom Dickinson</div>
<div class="property">@developedFromJIRA 111 10/09/13 4.35PM</div>
<div class="property">@lastReviewed </div>
<div class="property">@sprint 1</div>
<div class="property">@testphase Core</div>
</div>
<div class="narrative"><h2>Narrative:</h2>
<div class="element inOrderTo"><span class="keyword inOrderTo">In order to</span> manage my Appointment Request(s)</div>
<div class="element asA"><span class="keyword asA">As a</span> Patient User</div>
<div class="element iWantTo"><span class="keyword iWantTo">I want to</span> log into the e-RS</div>
</div>
<div class="scenario">
<h2>Scenario: NHSERS-111_S039_C2B | Patient should be able to login after 1 failed attempt</h2>
<div class="examples">
<h3>Examples:</h3>
<div class="step">Given browser is open</div>
<div class="step">When I navigate to &lt;pageName&gt; page</div>
<div class="step">Then the current page has title of &quot;&lt;pageTitle&gt;&quot; on the &lt;pageName&gt; page</div>
<div class="step">Given the current page has title of &quot;&lt;pageTitle&gt;&quot; on the Login page</div>
<div class="step">!-- Given a Patient User has a valid &lt;UBRN&gt;</div>
<div class="step">When I enter &quot;&lt;ubrn&gt;&quot; in the ubrn textboxes on the Login page</div>
<div class="step">!-- And a &lt;Year of Birth&gt;</div>
<div class="step">And I enter &quot;&lt;yearofbirth&gt;&quot; in the yobField textbox on the Login page</div>
<div class="step">!-- And an invalid &lt;Password&gt;</div>
<div class="step">And I enter &quot;&lt;password&gt;&quot; in the passwordField textbox on the Login page</div>
<div class="step">!-- When they submit their login details on the login page</div>
<div class="step">And I click the login button on the Login page</div>
<div class="step">!-- Then the  Patient User is unable to login</div>
<div class="step">!-- And the Login Page will be shown</div>
<div class="step">Then the Login Page will be shown</div>
<div class="step">!-- And &quot;Access to choose and book has been denied because the appointment reference number, year of birth or password are incorrect. Please check these</div>
<div class="step">!-- and try again. If you no longer have your password you should return to your GP practice to have it reissued. The receptionist or other practice staff will</div>
<div class="step">!-- be able to help you&quot; error message displayed 
!--And the text &quot;Access to Choose and Book has been denied because the appointment Reference number, Year of birth or Password are incorrect. Please check these and try again&quot; should be displayed on the Login page
!--And the text &quot;If you no longer have your password you should return to your GP practice to have it reissued. The receptionist or other practice staff will be able to help you.&quot; should be displayed on the Login page</div>
<div class="step">And the text &quot;Access to e-Referral Service has been denied because the appointment Reference number, Year of birth or Password are incorrect. Please check these and try again.&quot; should be displayed on the Login page</div>
<div class="step">And the text &quot;If you no longer have your password you should return to your GP practice to have it reissued. The receptionist or other practice staff will be able to help you.&quot; should be displayed on the Login page</div>
<div class="step">!-- And failed login attempts increases</div>
<div class="step">And the failed login count for ubrn &quot;&lt;ubrnno&gt;&quot; is 1</div>
<div class="step">!-- unused example table
!--|Login|e-Referral Service|1130 0000 0016|1971|qwert|
!--|Login|e-Referral Service|1130 0000 xxxx|1971|13245|
!--|Login|e-Referral Service|1130 0000 xxxx|1971|1a2s3|
!--|Login|e-Referral Service|1110 0000 0009|111000000009|1971|qwertyuiopasdfghjklmnbvcxzqwertyuiopasdfg|
!--|Login|e-Referral Service|1110 0000 0011|111000000011|1971|13246578901234567890132465789012345678901|</div>
<div class="step">!-- Given a Patient User has 1 failed login attempt</div>
<div class="step">!-- When they submit their valid login details on the login page</div>
<div class="step">Given the failed login count for ubrn &quot;&lt;ubrnno&gt;&quot; is 1</div>
<div class="step">When I enter &quot;&lt;ubrn&gt;&quot; in the ubrn textboxes on the Login page</div>
<div class="step">And I enter &quot;&lt;yearofbirth&gt;&quot; in the yobField textbox on the Login page</div>
<div class="step">And I enter &quot;&lt;rightPass&gt;&quot; in the passwordField textbox on the Login page</div>
<div class="step">And I click the login button on the Login page</div>
<div class="step">Then the patient user is able to successfully login to ERS</div>
<div class="step">!-- And the Activity Log is updated with login</div>
<div class="step">!-- And Last Activity Date Time is updated</div>
<div class="step">!-- And &lt;SessionID&gt; is logged</div>
<div class="step">!-- And Activity &lt;Activity&gt; is logged</div>
<div class="step">!-- And Date &lt;Date&gt; is logged</div>
<div class="step">!-- And Time &lt;Time&gt; is logged</div>
<div class="step">!-- And UBRN &lt;UBRN&gt; is logged</div>
<div class="step">!-- And Reason Code &lt;Reason Code&gt; is logged</div>
<div class="step">!-- Needs clarification from Dev/BAs as to what will be logged</div>
<div class="step">!-- Format of Activity Log is YYYY-MM-DD HH:mm:ss,sss [ACTIVITY] SessionID =  XXXXXXXXXX  UBRN =  XXXXXXXXXXXXX  Reason Code =  xxxxxxxxxxxx</div>
<div class="step">!-- &lt;SessionID&gt; = XXXXXXXXXXX</div>
<div class="step">!-- &lt;Activity&gt; is LOGIN</div>
<div class="step">!-- &lt;Date&gt; format is YYYY-MM-DD</div>
<div class="step">!-- &lt;Time&gt; format is HH:mm:ss,sss 

!--unused examples table
!--|Login|e-Referral Service|1110 0000 0001|999|Password01|SessionIDx|ActivityX|DateX|TimeX|ReasonCodeX|
!--|Login|e-Referral Service|1130 0000 0011|2014|Password01|SessionIDx|ActivityX|DateX|TimeX|ReasonCodeX|
!--|Login|e-Referral Service|1130 0000 0012|19YY|Password01|SessionIDx|ActivityX|DateX|TimeX|ReasonCodeX|
!--|Login|e-Referral Service|1130 0000 0013|YY85|Password01|SessionIDx|ActivityX|DateX|TimeX|ReasonCodeX|</div>
<table>
<thead>
<tr>
<th>pageName</th><th>pageTitle</th><th>ubrn</th><th>ubrnno</th><th>yearofbirth</th><th>password</th><th>rightPass</th></tr>
</thead>
<tbody>
<tr>
<td>Login</td><td>e-Referral Service</td><td>1110 0000 0017</td><td>111000000017</td><td>1971</td><td>wrongPass</td><td>Password01</td></tr>
</tbody>
</table>

<h3 class="example">Example: {pageName=Login, pageTitle=e-Referral Service, ubrn=1110 0000 0017, ubrnno=111000000017, yearofbirth=1971, password=wrongPass, rightPass=Password01}</h3>
<div class="step successful">Given browser is open</div>
<div class="step successful">When I navigate to <span class="step parameter">Login</span> page</div>
<div class="step successful">Then the current page has title of &quot;<span class="step parameter">e-Referral Service</span>&quot; on the <span class="step parameter">Login</span> page</div>
<div class="step successful">Given the current page has title of &quot;<span class="step parameter">e-Referral Service</span>&quot; on the <span class="step parameter">Login</span> page</div>
<div class="step ignorable">!-- Given a Patient User has a valid &lt;UBRN&gt;</div>
<div class="step successful">When I enter &quot;<span class="step parameter">1110 0000 0017</span>&quot; in the ubrn textboxes on the Login page</div>
<div class="step ignorable">!-- And a &lt;Year of Birth&gt;</div>
<div class="step successful">And I enter &quot;<span class="step parameter">1971</span>&quot; in the <span class="step parameter">yobField</span> textbox on the <span class="step parameter">Login</span> page</div>
<div class="step ignorable">!-- And an invalid &lt;Password&gt;</div>
<div class="step successful">And I enter &quot;<span class="step parameter">wrongPass</span>&quot; in the <span class="step parameter">passwordField</span> textbox on the <span class="step parameter">Login</span> page</div>
<div class="step ignorable">!-- When they submit their login details on the login page</div>
<div class="step successful">And I click the <span class="step parameter">login</span> button on the <span class="step parameter">Login</span> page</div>
<div class="step ignorable">!-- Then the  Patient User is unable to login</div>
<div class="step ignorable">!-- And the Login Page will be shown</div>
<div class="step successful">Then the Login Page will be shown</div>
<div class="step ignorable">!-- And &quot;Access to choose and book has been denied because the appointment reference number, year of birth or password are incorrect. Please check these</div>
<div class="step ignorable">!-- and try again. If you no longer have your password you should return to your GP practice to have it reissued. The receptionist or other practice staff will</div>
<div class="step ignorable">!-- be able to help you&quot; error message displayed 
!--And the text &quot;Access to Choose and Book has been denied because the appointment Reference number, Year of birth or Password are incorrect. Please check these and try again&quot; should be displayed on the Login page
!--And the text &quot;If you no longer have your password you should return to your GP practice to have it reissued. The receptionist or other practice staff will be able to help you.&quot; should be displayed on the Login page</div>
<div class="step successful">And the text &quot;Access to e-Referral Service has been denied because the appointment Reference number, Year of birth or Password are incorrect. Please check these and try again.&quot; should be displayed on the <span class="step parameter">Login</span> page</div>
<div class="step successful">And the text &quot;If you no longer have your password you should return to your GP practice to have it reissued. The receptionist or other practice staff will be able to help you.&quot; should be displayed on the <span class="step parameter">Login</span> page</div>
<div class="step ignorable">!-- And failed login attempts increases</div>
<div class="step successful">And the failed login count for ubrn &quot;<span class="step parameter">111000000017</span>&quot; is <span class="step parameter">1</span></div>
<div class="step ignorable">!-- unused example table
!--|Login|e-Referral Service|1130 0000 0016|1971|qwert|
!--|Login|e-Referral Service|1130 0000 xxxx|1971|13245|
!--|Login|e-Referral Service|1130 0000 xxxx|1971|1a2s3|
!--|Login|e-Referral Service|1110 0000 0009|111000000009|1971|qwertyuiopasdfghjklmnbvcxzqwertyuiopasdfg|
!--|Login|e-Referral Service|1110 0000 0011|111000000011|1971|13246578901234567890132465789012345678901|</div>
<div class="step ignorable">!-- Given a Patient User has 1 failed login attempt</div>
<div class="step ignorable">!-- When they submit their valid login details on the login page</div>
<div class="step successful">Given the failed login count for ubrn &quot;<span class="step parameter">111000000017</span>&quot; is <span class="step parameter">1</span></div>
<div class="step successful">When I enter &quot;<span class="step parameter">1110 0000 0017</span>&quot; in the ubrn textboxes on the Login page</div>
<div class="step successful">And I enter &quot;<span class="step parameter">1971</span>&quot; in the <span class="step parameter">yobField</span> textbox on the <span class="step parameter">Login</span> page</div>
<div class="step successful">And I enter &quot;<span class="step parameter">Password01</span>&quot; in the <span class="step parameter">passwordField</span> textbox on the <span class="step parameter">Login</span> page</div>
<div class="step successful">And I click the <span class="step parameter">login</span> button on the <span class="step parameter">Login</span> page</div>
